[tool.black]
line-length = 100
target-version = ['py310']
include = '\.pyi?$'
exclude = '''
(
      __pycache__
    | \.git
    | \.mypy_cache
    | \.pytest_cache
    | \.fleet
    | \.vscode
    | \.idea
    | \.venv
    | \bdist\b
    | \bdoc\b
)
'''

[tool.pytest.ini_options]
minversion = "7.0"
addopts = "--doctest-modules --doctest-continue-on-failure -ra"
log_cli = true
testpaths = [
    "tests",
]

[tool.ruff]
select = [
    "B", # flake8-bugbear
    "BLE", # flake8-blind-except
    "C90", # mccabe
    "D", # pydocstyle
    "E", # pycodestyle errors
    "F", # pyflakes
    "I", # isort
    "NPY", # NumPy-specific rules
    "W", # pycodestyle warnings
    "YTT",  # flake8-2020
    "RUF100",  # Remove unused `noqa` directive.
]

ignore = [
  "E501", # line length violations
  "PGH003",
  "RET504",
  "RET505",
  "RET506",
  "RET507",
  "RET508",
  "D100", # public module
  "D101", # public class
  "D102", # public method
  "D103", # public function
  "D105", # magic methods
  "D107", # init
  "D202", # blank lines after function docstring
  "D203", # blank line before class docstring
  "D205", # blank line between summary line and description
  "D213", # Multi-line docstring summary should start at the second line
  "D402", # First line should not be the function's signature
  "D417", # Missing argument descriptions
]

# By default, always enumerate fixed violations.
show-fixes = true

# By default, always show source code snippets.
show-source = true

# Respect file exclusions via `.gitignore` and other standard ignore files.
respect-gitignore = true

ignore-init-module-imports = true

# Using 100 as the line length for code.
line-length = 100

# Allow unused variables when underscore-prefixed.
dummy-variable-rgx = "^(_+|(_+[a-zA-Z0-9_]*[a-zA-Z0-9]+?))$"

# Assume Python 3.10.
target-version = "py310"

[tool.ruff.mccabe]
# Unlike Flake8, default to a complexity level of 10.
max-complexity = 10

# Ignore `E402` (import violations) in all `__init__.py` files.
[tool.ruff.per-file-ignores]
"__init__.py" = ["E402"]
"*test*.py" = ["D"] # ignore all docstring lints in tests

[tool.ruff.isort]
lines-after-imports = 2

# PEP8 states sets documentation max length to 72.
[tool.ruff.pycodestyle]
max-doc-length = 88
